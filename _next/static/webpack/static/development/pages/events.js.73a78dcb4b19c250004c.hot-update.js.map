{"version":3,"file":"static/webpack/static/development/pages/events.js.73a78dcb4b19c250004c.hot-update.js","sources":["webpack:///./pages/events.js"],"sourcesContent":["// @flow\n\n/**\n * <!-- {\"order\": 4} -->\n *\n * # Events\n *\n * Get instance of [google.maps.Map](https://developers.google.com/maps/documentation/javascript/reference/map)\n * class using _ref_ property or _useMap_ hook.\n * Then subscribe on any [event](https://developers.google.com/maps/documentation/javascript/events)\n * inside _useEffect_ hook using _addListener_.\n *\n * Don't forget to unsubscribe in _useEffect_ cleanup.\n *\n * > Sometimes google map fires events like _idle_ in a wrong order,\n *   usually wrapping callback into 2 rafs helps.\n *\n * > Don't use code below in production, it's better to intercept bounds changes inside _idle_ event.\n *\n */\n\nimport * as React from 'react';\nimport { Map } from 'rgm';\nimport { useGoogleApiLoader } from '../dev-src/hooks';\nimport { Ratio, Info } from '../dev-src/controls';\n\n// https://developers.google.com/maps/documentation/javascript/reference/map#MapOptions\nconst MAP_OPTIONS = {\n  zoom: 9,\n  center: {\n    lat: 59.936,\n    lng: 30.314,\n  },\n};\n\nexport default function Events() {\n  const api = useGoogleApiLoader();\n  const [bounds, setBounds] = React.useState(null);\n  const [map, setMap] = React.useState(null);\n\n  React.useEffect(() => {\n    const boundsChangedListener = map.addListener('bounds_changed', () => {\n      const bounds = map.getBounds();\n      setBounds(bounds);\n    });\n\n    return () => {\n      boundsChangedListener.remove();\n    };\n  }, [map]);\n\n  return (\n    <div>\n      <Ratio value={3 / 4}>\n        {api && <Map ref={setMap} api={api} options={MAP_OPTIONS} />}\n      </Ratio>\n\n      <Info>{bounds?.getCenter().toString() ?? ' '}</Info>\n    </div>\n  );\n}\n\nexport const getStaticProps = async () => {\n  // The best is to place this method at _app.js but this doesn't work now\n  const doc = await import('../dev-src/doc');\n  return doc.getStaticProps();\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAFA;AAFA;;AAQA;AAAA;AACA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;A","sourceRoot":""}